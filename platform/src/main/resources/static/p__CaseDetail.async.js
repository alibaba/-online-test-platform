(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{SGvF:function(e,t,a){e.exports={headerList:"antd-pro-pages-case-detail-index-headerList",tableList:"antd-pro-pages-case-detail-index-tableList",tableListOperator:"antd-pro-pages-case-detail-index-tableListOperator",tableListForm:"antd-pro-pages-case-detail-index-tableListForm",submitButtons:"antd-pro-pages-case-detail-index-submitButtons",standardList:"antd-pro-pages-case-detail-index-standardList",headerInfo:"antd-pro-pages-case-detail-index-headerInfo",listContent:"antd-pro-pages-case-detail-index-listContent",listContentItem:"antd-pro-pages-case-detail-index-listContentItem",extraContentSearch:"antd-pro-pages-case-detail-index-extraContentSearch",listCard:"antd-pro-pages-case-detail-index-listCard",standardListForm:"antd-pro-pages-case-detail-index-standardListForm",formResult:"antd-pro-pages-case-detail-index-formResult"}},"sUE/":function(e,t,a){"use strict";a.r(t);a("bbsP");var n,r,i,s,l=a("/wGt"),d=(a("IzEo"),a("bx4M")),c=(a("g9YV"),a("wCAj")),o=(a("Awhp"),a("KrTs")),u=(a("/zsF"),a("PArb")),p=a("p0pE"),h=a.n(p),m=a("2Taf"),b=a.n(m),f=a("vZ4D"),g=a.n(f),w=a("l4Ni"),x=a.n(w),S=a("ujKo"),v=a.n(S),y=a("MhPg"),I=a.n(y),E=(a("y8nQ"),a("Vl3Y")),C=a("q1tI"),L=a.n(C),V=a("MuoO"),R=a("wY1l"),k=a.n(R),D=a("zHco"),O=a("p0YK"),F=a.n(O),j=a("+n12"),z=a("SGvF"),J=a.n(z),T=function(e){return Object.keys(e).map(function(t){return e[t]}).join(",")},A=(n=Object(V["connect"])(function(e){var t=e.caseDetail,a=e.loading;return{caseDetail:t,loading:a.models.caseDetail}}),r=E["a"].create(),n(i=r((s=function(e){function t(){var e,a;b()(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=x()(this,(e=v()(t)).call.apply(e,[this].concat(r))),a.state={formValues:{},drawerVisible:!1,verifyRuleList:[],traceVisible:!1,traceInfo:{}},a.handleStandardTableChange=function(e,t,n){var r=a.props.dispatch,i=a.state.formValues,s=Object.keys(t).reduce(function(e,a){var n=h()({},e);return n[a]=T(t[a]),n},{}),l=h()({currentPage:e.current,pageSize:e.pageSize},i,s);n.field&&(l.sorter="".concat(n.field,"_").concat(n.order)),r({type:"caseDetail/fetch",payload:l})},a.handleDrawerVisible=function(e,t){a.setState({drawerVisible:!!e,verifyRuleList:t&&t.data&&t.data.executedRuleSet?t.data.executedRuleSet:[]})},a.handleTraceVisible=function(e,t){a.setState({traceVisible:!!e,traceInfo:t&&t.debugMap?t.debugMap:[]})},a}return I()(t,e),g()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,a=e.match,n=a.params;t({type:"caseDetail/fetch",payload:{taskId:n.id,caseIds:n.caseIds}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.caseDetail.data,n=t.loading,r=this.state,i=r.drawerVisible,s=r.verifyRuleList,p=r.traceVisible,m=r.traceInfo,b=[{title:"\u4efb\u52a1id",dataIndex:"taskid",width:"10%"},{title:"\u7528\u4f8bid",dataIndex:"caseid",width:"10%"},{title:"\u8bf7\u6c42",dataIndex:"request"},{title:"\u7ed3\u679c",dataIndex:"response",render:function(e){return Object(j["b"])(e)?L.a.createElement(F.a,{collapsed:!0,src:JSON.parse(e)}):L.a.createElement("span",null,e)}},{title:"\u89c4\u5219\u7ed3\u679c",width:"10%",render:function(t,a){return L.a.createElement("a",{onClick:function(){return e.handleDrawerVisible(!0,a.ruleResult&&""!==a.ruleResult?JSON.parse(a.ruleResult):{})}},"\u8be6\u60c5")}},{title:"\u64cd\u4f5c",width:"12%",render:function(t,a){return L.a.createElement(C["Fragment"],null,L.a.createElement("a",{onClick:function(){return e.handleTraceVisible(!0,a.ruleResult&&""!==a.ruleResult?JSON.parse(a.ruleResult):{})}},"trace"),L.a.createElement(u["a"],{type:"vertical"}),L.a.createElement(k.a,{to:{pathname:"/ruleDebug",query:{request:a.request}}},"debug"))}}],f=[{title:"\u89c4\u5219\u540d\u79f0",dataIndex:"name",width:"20%"},{title:"\u72b6\u6001",dataIndex:"state",width:"15%",render:function(e){return L.a.createElement(o["a"],{status:"FAIL"===e?"error":"PASS"===e?"success":"default",text:e})}},{title:"\u89c4\u5219\u7c7b\u578b",dataIndex:"category",width:"20%"},{title:"\u9519\u8bef\u4fe1\u606f",dataIndex:"message"}];return L.a.createElement(D["a"],null,L.a.createElement("div",{className:J.a.standardList},L.a.createElement(d["a"],{title:"\u547d\u4e2d\u8bf7\u6c42",bordered:!1,bodyStyle:{padding:"0 24px 24px 24px"}},L.a.createElement("div",{className:J.a.tableList},L.a.createElement(c["a"],{rowKey:"id",loading:n,dataSource:a.list,bordered:!0,columns:b,pagination:h()({showSizeChanger:!0,showQuickJumper:!0},a.pagination),onChange:this.handleStandardTableChange})))),L.a.createElement(l["a"],{title:"\u89c4\u5219\u9a8c\u8bc1\u7ed3\u679c",placement:"right",width:800,closable:!1,onClose:function(){return e.handleDrawerVisible()},visible:i},L.a.createElement(c["a"],{rowKey:"id",dataSource:s,bordered:!0,columns:f,pagination:{showSizeChanger:!0,showQuickJumper:!0}})),L.a.createElement(l["a"],{title:"trace\u4fe1\u606f",placement:"right",width:800,closable:!1,onClose:function(){return e.handleTraceVisible()},visible:p},L.a.createElement(F.a,{src:m})))}}]),t}(C["PureComponent"]),i=s))||i)||i);t["default"]=A}}]);